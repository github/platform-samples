# This GraphQL query can be used to generate a list of enterprise members and their SCIM account details in a GitHub Enterprise Cloud with Managed Users (EMU) enterprise account.
#
# Please ensure that your Personal Access Token (PAT) has the "read:enterprise" scope to access enterprise-level data.
# Replace `ENTEPRISE_SLUG` with the slug of your enterprise. To get more than 10 members, you can adjust the "first" parameter.
#
# Note: the output will include suspended users (identified with their obfuscated account name), but it will not include personal user accounts that are not part of the EMU (Enterprise Managed Users) system.

query ListAllEnterpriseUsers {
# Replace `ENTERPRISE_SLUG` with the slug of your enterprise. To get more than 10 members, you can adjust the "first" parameter.
#
# Note: the output will include suspended users (identified with their obfuscated account name), but it will not include personal user accounts that are not part of the EMU (Enterprise Managed Users) system.

query ListAllEnterpriseUsers {
  enterprise(slug: "ENTERPRISE_SLUG") {
    ownerInfo {
      samlIdentityProvider {
        externalIdentities(first: 10) {
          nodes {
            user {
              login
              name
            }
            scimIdentity {
              username
              groups
            }
          }
        }
      }
    }
  }
}
